<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabular View - Responsive</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/tabular_view.css">
</head>
<body>
    <%- include("partials/navbar.ejs") %>
    <div class="main-app-container">

        <nav class="nav-container">
            <button class="nav-item" onclick="window.location.href='/guest/flight-view'">FLIGHT VIEW</button>
            <button class="nav-item active">TABULAR VIEW</button>
            <button class="nav-item" onclick="window.location.href='/guest/extended-view'">EXTENDED VIEW</button>
        </nav>

        <main class="content-area">
            <div class="tabular-view">
                
                <section class="info-section">
                    <div class="section-header">
                        <h2 class="section-title">FLIGHT INFORMATION</h2>
                    </div>
                    <div class="responsive-grid col-4">
                        <div class="grid-cell header-cell">FLIGHT NUMBER</div>
                        <div class="grid-cell header-cell">DATE</div>
                        <div class="grid-cell header-cell">DEPARTURE AIRPORT</div>
                        <div class="grid-cell header-cell">GATE</div>
                        
                        <div class="grid-cell data-cell"><%= flightInfo ? flightInfo.flight_number : 'N/A' %></div>
                        <div class="grid-cell data-cell"><%= flightInfo ? flightInfo.date.toISOString().split('T')[0] : 'N/A' %></div>
                        <div class="grid-cell data-cell"><%= flightInfo ? flightInfo.dept_airport : 'N/A' %></div>
                        <div class="grid-cell data-cell"><%= flightInfo ? flightInfo.gate : 'TBD' %></div>
                    </div>
                </section>
        
                <div class="split-section-container">  
                    <section class="info-section">
                        <div class="section-header">
                            <h2 class="section-title">PASSENGER</h2>
                        </div>
                        <div class="responsive-grid col-3">
                            <div class="grid-cell header-cell">NAME</div>
                            <div class="grid-cell header-cell">SEAT</div>
                            <div class="grid-cell header-cell">CLASS</div>

                        <% if (passengers && passengers.length > 0) { %>
                            <% passengers.forEach(function(p) { %>
                                <div class="grid-cell data-cell"><%= p.first_name %> <%= p.last_name %></div>
                                <div class="grid-cell data-cell"><%= p.seat_number %></div>
                                <div class="grid-cell data-cell"><%= p.class %></div>
                            <% }); %>
                        <% } else { %>
                            <div class="grid-cell data-cell" style="grid-column: span 3;">No passengers found</div>
                        <% } %>
                        </div>
                    </section>
        
                    <section class="info-section">
                        <div class="section-header">
                            <h2 class="section-title">STAFF</h2>
                        </div>
                        <div class="responsive-grid col-3">
                            <div class="grid-cell header-cell">NAME</div>
                            <div class="grid-cell header-cell">ROLE</div>
                            <div class="grid-cell header-cell">RANK</div>

                        <% if (staff && staff.length > 0) { %>
                            <% staff.forEach(function(s) { %>
                                <div class="grid-cell data-cell"><%= s.first_name %> <%= s.last_name %></div>
                                <div class="grid-cell data-cell"><%= s.role %></div>
                                <div class="grid-cell data-cell"><%= s.rank || 'N/A' %></div>
                            <% }); %>
                        <% } else { %>
                            <div class="grid-cell data-cell" style="grid-column: span 3;">No staff assigned</div>
                        <% } %>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
</body>
</html>